<!DOCTYPE HTML>
{% extends 'Comp/base1.html' %}
{% load static %}
<link rel="stylesheet" href="{% static 'new/css/style.css' %}">
<link rel="stylesheet" href="{% static 'new/css/colors/blue.css' %}" id="colors">
<body>
	{% block content %}



<div class="container">
    <div class="single">  
	   <div class="form-container">
        <h2>Post Job </h2>
        <form method="POST" action="" id="postjob" enctype="multipart/form-data" onsubmit="return validateForm()">

            {% csrf_token %}
            {% include 'Message.html' %}

            <div class="row">

            <div class="form-group col-md-12">
                <label class="col-md-3 control-lable" for="jName">Job name</label>
                <div class="col-md-9">
                    <input type="text" path="jobname" name="jobname" id="jobname"  value="{{ job.jobname }}"  required class="form-control input-sm"/>
                    <span id="name" style="font-size:12px;margin-top:-5px;" class="text-danger"></span>
                </div>
            </div>
         </div>
         <div class="row">
            <div class="form-group col-md-12">
                <label class="col-md-3 control-lable" for="CName">Company Name</label>
                <div class="col-md-9">
                    <input type="text" path="CName" name="Cname" id="Cname"  value="{{ job.companyname }}"  class="form-control input-sm"/>
                    <span id="names" style="font-size:12px;margin-top:-5px;" class="text-danger"></span>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="form-group col-md-12">
                <label class="col-md-3 control-lable" for="Description"> Company Address</label>
                <div class="col-md-9">
                    <textarea path="desp" name="add" id="add"    class="form-control input-sm"/>{{ job.companyaddress }}
                </textarea>
                    <span id="names" style="font-size:12px;margin-top:-5px;" class="text-danger"></span>
                </div>
            </div>
        </div>
        
      
        <div class="row">
            <div class="form-group col-md-12">
                <label class="col-md-3 control-lable" for="Description">Job Description</label>
                <div class="col-md-9">
                    <textarea path="desp" name="Description" id="Description"   class="form-control input-sm"/>{{ job.jobdescription }}
                </textarea>
                    <span id="names" style="font-size:12px;margin-top:-5px;" class="text-danger"></span>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="form-group col-md-12">
                <label class="col-md-3 control-lable" for="qualification">Qualification</label>
                <div class="col-md-9">
                    <textarea path="qualification" name="qualification" id="qualification"   class="form-control input-sm">{{ job.qualification }}
                </textarea>
                    <span id="names" style="font-size:12px;margin-top:-5px;" class="text-danger"></span>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="form-group col-md-12">
                <label class="col-md-3 control-lable" for="Response">Responsibilities</label>
                <div class="col-md-9">
                    <textarea path="Response" name="Response" id="Response"    class="form-control input-sm">{{ job.responsibility }}
                </textarea>
                    <span id="names" style="font-size:12px;margin-top:-5px;" class="text-danger"></span>
                </div>
            </div>
        </div>
        <div class="row">

            <div class="form-group col-md-12">
                <label class="col-md-3 control-lable" for="location">Location</label>
                <div class="col-md-9">
                    <input type="text" path="location" name="location" id="location" value="{{ job.location }}"  required class="form-control input-sm"/>
                    <span id="name" style="font-size:12px;margin-top:-5px;" class="text-danger"></span>
                </div>
            </div>
         </div>
         <div class="row">

            <div class="form-group col-md-12">
                <label class="col-md-3 control-lable" for="Web">Company Website</label>
                <div class="col-md-9">
                    <input type="text" path="web" name="web" id="web"  value="{{job.companywebsite}}"  required class="form-control input-sm"/>
                    <span id="name" style="font-size:12px;margin-top:-5px;" class="text-danger"></span>
                </div>
            </div>
         </div>
         <div class="row">
            <div class="form-group col-md-12">
              <label class="col-md-3 control-lable" for="mobile">Mobile Number</label>
              <div class="col-md-9">
                <input type="tel" path="Mobile" id="mobile" required name="mobile"   value="{{job.companycontact}}" class="form-control input-sm"/>
                <span id="pho" style="font-size:12px;margin-top:-5px;" class="text-danger font-weight-bold"></span>
                
              </div>
            </div>
          </div>


        <div class="row">
            <div class="form-group col-md-12">
                <label class="col-md-3 control-lable" for="email">Email</label>
                <div class="col-md-9">
                    <input type="email" name="email" path="email"  id="email"  value="{{user.email}}" required  class="form-control input-sm"/>
                    <span id="mail" style="font-size:12px;margin-top:-5px;" class="text-danger font-weight-bold"></span>
                </div>
            </div>
        </div>

        <div class="row">

            <div class="form-group col-md-12">
                <label class="col-md-3 control-lable" for="salary">Salary</label>
                <div class="col-md-9">
                    <input type="text" path="salary" name="salary" id="salary" value="{{ job.salarypackage}}"   required class="form-control input-sm"/>
                    <span id="name" style="font-size:12px;margin-top:-5px;" class="text-danger"></span>
                </div>
            </div>
         </div>
         <div class="row">

            <div class="form-group col-md-12">
                <label class="col-md-3 control-lable" for="Experience">Experience</label>
                <div class="col-md-9">
                    <input type="text" path="exp" name="exp" id="exp" value="{{ job.experience}}"   required class="form-control input-sm"/>
                    <span id="name" style="font-size:12px;margin-top:-5px;" class="text-danger"></span>
                </div>
            </div>
         </div>
        
        <div class="row">
            <div class="form-group col-md-12">
                <label class="col-md-3 control-lable" for="CName">Tagline</label>
                <div class="col-md-9">
                    <input type="text" path="tagline" name="tagline" id="tagline"  value="{{job.tagline}}"  class="form-control input-sm"/>
                    <span id="tagline" style="font-size:12px;margin-top:-5px;" class="text-danger"></span>
                </div>
            </div>
        </div>
         
        <div class="form-group col-md-12">
            <label class="col-md-3 control-label" for="enddate">Expiration Date</label>
            <div class="col-md-9">
              <input type="date" path="enddate" name="enddate" id="enddate" required class="form-control input-sm" value="{{ job.enddate}}" />
              <span id="enddate-error" style="font-size:12px;margin-top:-5px;" class="text-danger"></span>
            </div>
          </div>
          
     </div>

         </div>
         <br>
         
        <div class="row">
            <div class="form-actions floatRight">
                <input type="submit" value="Post Job" class="btn btn-primary btn-sm">
            </div>
        </div>
    </form>
</div>
</div>
</div>
{% endblock %}


<!-- <script>
    // Get the form and input field
    const form = document.querySelector('form');
    const mobileInput = document.querySelector('#mobile');
  
    // Add a listener for form submission
    form.addEventListener('submit', function(event) {
      // Check if the phone number matches the pattern
      const phoneNumber = mobileInput.value;
      const phoneNumberPattern = /^\d{3}-\d{3}-\d{4}$/;
      if (!phoneNumberPattern.test(phoneNumber)) {
        // If the phone number is invalid, prevent form submission and display an error message
        event.preventDefault();
        const phoneNumberError = document.querySelector('#pho');
        phoneNumberError.textContent = 'Please enter a valid phone number in the format XXX-XXX-XXXX';
        phoneNumberError.style.display = 'block';
      }
    });
  </script> -->
<script>
const enddateInput = document.getElementById('enddate');

enddateInput.addEventListener('keyup', function() {
  const enddate = new Date(enddateInput.value);
  const today = new Date();

  if (enddate < today) {
    enddateInput.setCustomValidity('Expiration date cannot be earlier than today');
  } else {
    enddateInput.setCustomValidity('');
  }
});



function validateForm() {
    
    var jobname = document.getElementById("jobname").value;
    var cname = document.getElementById("Cname").value;
    var add = document.getElementById("add").value;
    var jobtype = document.getElementById("jobtype").value;
    var description = document.getElementById("Description").value;
    var qualification = document.getElementById("qualification").value;
    var response = document.getElementById("Response").value;
    var location = document.getElementById("location").value;
    var web = document.getElementById("Web").value;
    var email = document.getElementById("Email").value;
    var inputDate = document.getElementById("enddate").value;
    var today = new Date().toISOString().slice(0, 10);
    var errors = [];

    if (jobname === "") {
        errors.push("Job name cannot be empty");
    }

    if (cname === "") {
        errors.push("Company name cannot be empty");
    }

    if (add === "") {
        errors.push("Company address cannot be empty");
    }

    if (jobtype === "") {
        errors.push("Please select a job type");
    }

    if (description === "") {
        errors.push("Job description cannot be empty");
    }

    if (qualification === "") {
        errors.push("Qualification cannot be empty");
    }

    if (response === "") {
        errors.push("Responsibilities cannot be empty");
    }

    if (location === "") {
        errors.push("Location cannot be empty");
    }

    if (web === "") {
        errors.push("Company website cannot be empty");
    }
    if (inputDate < today) {
    document.getElementById("enddate-error").innerHTML = "Expiration date must be today or later.";
  } else {
    document.getElementById("enddate-error").innerHTML = "";
  }

    if (email === "") {
        errors.push("Email cannot be empty");
    } else {
        var pattern = /^[^ ]+@[^ ]+\.[a-z]{2,3}$/;
        if (!pattern.test(email)) {
            errors.push("Invalid email address");
        }
    }

    if (errors.length > 0) {
        var errorMessage = "<ul>";
        for (var i = 0; i < errors.length; i++) {
            errorMessage += "<li>" + errors[i] + "</li>";
        }
        errorMessage += "</ul>";
        document.getElementById("error-message").innerHTML = errorMessage;
        return false;
    }

    return true;
}


 

</script>
<script>
    const logoInput = document.getElementById("logo");
    const logoError = document.getElementById("logo-error");
    
    logoInput.addEventListener("change", function() {
        const file = logoInput.files[0];
        const fileSize = file.size / 1024 / 1024; // Convert to MB
        const allowedTypes = ["image/png", "image/jpeg", "image/gif"];
        
        if (!allowedTypes.includes(file.type)) {
            logoError.textContent = "Invalid file type. Please upload a PNG, JPEG or GIF file.";
            logoInput.value = null;
            return;
        }
        
        if (fileSize > 5) { // 5MB maximum file size
            logoError.textContent = "File size exceeds 5MB limit.";
            logoInput.value = null;
            return;
        }
        
        logoError.textContent = "";
    });
</script>
</body>
</html>